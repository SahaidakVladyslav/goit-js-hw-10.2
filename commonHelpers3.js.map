{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport { IziToast } from 'izitoast';\n\nconst delayInputEl = document.querySelector('[name=\"delay\"]');\nconst stepInputEl = document.querySelector('[name=\"step\"]');\nconst amountInputEl = document.querySelector('[name=\"amount\"]');\nconst formEl = document.querySelector('.form');\nconst btnStart = document.querySelector('button[type=\"submit\"]');\nconst shouldResolve = Math.random() > 0.3;\nlet timerId = null;\nlet count = 0;\nlet timeDelay = 0;\nlet counterAmount = 0;\n\nconst btnNone = () => {\n    btnStart.style.opacity = 0.5;\n    btnStart.style.pointerEvents = 'none';\n};\n\nconst btnAuto = () => {\n    btnStart.style.pointerEvents = 'auto';\n    btnStart.style.opacity = 1;\n};\n\n\nfunction createPromise(position, initialDelay, subsequentDelay) {\n    return new Promise((resolve, reject) => {\n        timeDelay = initialDelay;\n        counterAmount = 1\n        function finallyDesition() {\n            if (count !== 0) {\n                timerId = setInterval(() => {\n                    const shouldResolve = Math.random() > 0.3;\n\n                    counterAmount += 1\n                    timeDelay = +timeDelay + +subsequentDelay;\n                    if (shouldResolve) {\n\n                        console.log(`виклик зробився за такий час ${timeDelay}`)\n                    } else {\n\n                        console.log(`виклик зробився за такий час ${timeDelay}`)\n                    }\n                    count += 1;\n                    if (count >= position) {\n                        count = 0;\n                        formEl.reset();\n                        btnAuto()\n                        clearInterval(timerId);\n                    }\n                }, subsequentDelay)\n            }\n        }\n\n\n        function intervalFunction() {\n            if (count === 0) {\n                setTimeout(() => {\n                    const shouldResolve = Math.random() > 0.3;\n                    console.log(1)\n\n                    count += 1;\n                    if (shouldResolve) {\n\n                        console.log(`виклик зробився за такий час ${initialDelay}`)\n                        finallyDesition()\n                        resolve('To praca!');\n                    } else {\n\n                        console.log(`виклик зробився за такий час ${initialDelay}`)\n                        finallyDesition()\n                        reject('To NE praca!');\n                    }\n                }, initialDelay)\n            }\n        }\n        intervalFunction()\n    });\n}\n\nformEl.addEventListener('submit', (event) => {\n    event.preventDefault();\n    btnNone()\n    iziToast.success({\n        id: success,\n        title: 'OK',\n        message: 'Successfully inserted record!',\n        // positio\n    });\n    const amountStep = amountInputEl.value;\n    const initialDelay = delayInputEl.value;\n    const subsequentDelay = stepInputEl.value;\n\n    createPromise(amountStep, initialDelay, subsequentDelay)\n        .then((result) => {\n            console.log('Promise resolved:', result);\n        })\n        .catch((error) => {\n            console.log('Promise rejected:', error);\n        })\n});\n"],"names":["delayInputEl","stepInputEl","amountInputEl","formEl","btnStart","timerId","count","timeDelay","btnNone","btnAuto","createPromise","position","initialDelay","subsequentDelay","resolve","reject","finallyDesition","shouldResolve","intervalFunction","event","amountStep","result","error"],"mappings":"4HAGA,MAAMA,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAW,SAAS,cAAc,uBAAuB,EAE/D,IAAIC,EAAU,KACVC,EAAQ,EACRC,EAAY,EAGhB,MAAMC,EAAU,IAAM,CAClBJ,EAAS,MAAM,QAAU,GACzBA,EAAS,MAAM,cAAgB,MACnC,EAEMK,EAAU,IAAM,CAClBL,EAAS,MAAM,cAAgB,OAC/BA,EAAS,MAAM,QAAU,CAC7B,EAGA,SAASM,EAAcC,EAAUC,EAAcC,EAAiB,CAC5D,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpCR,EAAYK,EAEZ,SAASI,GAAkB,CACnBV,IAAU,IACVD,EAAU,YAAY,IAAM,CACxB,MAAMY,EAAgB,KAAK,OAAM,EAAK,GAGtCV,EAAY,CAACA,GAAY,CAACM,EAGtB,QAAQ,IAFRI,EAEY,gCAAgCV,IAGhC,gCAAgCA,GAHW,EAK3DD,GAAS,EACLA,GAASK,IACTL,EAAQ,EACRH,EAAO,MAAK,EACZM,EAAS,EACT,cAAcJ,CAAO,EAE5B,EAAEQ,CAAe,EAEzB,CAGD,SAASK,GAAmB,CACpBZ,IAAU,GACV,WAAW,IAAM,CACb,MAAMW,EAAgB,KAAK,OAAM,EAAK,GACtC,QAAQ,IAAI,CAAC,EAEbX,GAAS,EACLW,GAEA,QAAQ,IAAI,gCAAgCL,GAAc,EAC1DI,EAAiB,EACjBF,EAAQ,WAAW,IAGnB,QAAQ,IAAI,gCAAgCF,GAAc,EAC1DI,EAAiB,EACjBD,EAAO,cAAc,EAE5B,EAAEH,CAAY,CAEtB,CACDM,EAAkB,CAC1B,CAAK,CACL,CAEAf,EAAO,iBAAiB,SAAWgB,GAAU,CACzCA,EAAM,eAAc,EACpBX,EAAS,EACT,SAAS,QAAQ,CACb,GAAI,QACJ,MAAO,KACP,QAAS,+BAEjB,CAAK,EACD,MAAMY,EAAalB,EAAc,MAC3BU,EAAeZ,EAAa,MAC5Ba,EAAkBZ,EAAY,MAEpCS,EAAcU,EAAYR,EAAcC,CAAe,EAClD,KAAMQ,GAAW,CACd,QAAQ,IAAI,oBAAqBA,CAAM,CACnD,CAAS,EACA,MAAOC,GAAU,CACd,QAAQ,IAAI,oBAAqBA,CAAK,CAClD,CAAS,CACT,CAAC"}